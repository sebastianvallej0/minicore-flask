<!doctype html>
<html lang="es">
<head><meta charset="utf-8"><title>Comisiones</title></head>
<body>
  <nav>
    <a href="/vendedores/">Vendedores</a> |
    <a href="/ventas/">Ventas</a> |
    <a href="/comisiones/">Comisiones</a>
  </nav>

  <h2>Comisiones</h2>
  <form method="get" action="/comisiones/">
    <input type="number" name="vendedor_id" placeholder="ID vendedor" required>
    <input type="date" name="desde">
    <input type="date" name="hasta">
    <button>Calcular</button>
  </form>

  {% if data %}
  <h3>Total: {{ "%.2f"|format(data.total) }}</h3>
  <table border="1" cellpadding="6">
    <tr><th>Categoría</th><th>Monto</th><th>%</th><th>Comisión</th></tr>
    {% for d in data.detalle %}
    <tr>
      <td>{{ d.categoria }}</td>
      <td>{{ "%.2f"|format(d.monto) }}</td>
      <td>{{ "%.2f"|format(d.porcentaje) }}</td>
      <td>{{ "%.2f"|format(d.comision) }}</td>
    </tr>
    {% endfor %}
  </table>
  {% endif %}
</body>
</html>
